{% load static %}
<!doctype html>
<html lang="te">
<head>
  <title>{{ stream.title }}</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="{% static 'liveStream/style.css' %}">
  <script src="{% static 'liveStream/ovenplayer/ovenplayer.js' %}"></script>
</head>
 <body>
    <nav class="navbar navbar-light bg-light justify-content-center">
      <span class="navbar-brand mb-0 h1 red">{{ stream.title }}</span> <br>
    </nav>
    <div class="container">
      <div class="row justify-content-center h-100">
        <div class="col-sm-8">
          <div id="player">
          </div>
        </div>
        <div class="col-sm-4 schedule">
          <div>
            <p>{{ stream.description }}</p>
            <img src="media/{{ stream.img_src }}" alt="{{title}}">
          </div>
        </div>
      </div>
    </div>
   
   <div class="container">
     <div id="comment_thread">
     </div>
   </div>

    <script>
      const roomName= '{{ stream.comments_room }}' ;
      const commentHost = '{{ stream.comments_server }}';
      var d = document, s = d.createElement('script');
      s.src = 'http://'+commentHost+'/static/comments.js';
      (d.head || d.body).appendChild(s);
    </script>

    <script>
      OvenPlayer.debug(true);
      let webrtcSources = OvenPlayer.generateWebrtcUrls([
        {
          host : '{{ stream.stream_url }}',
          application : 'app',
          stream : "stream_o",
          width:"320",
          height:"160",
          label : "Stream 1"
        }
      ]);

      let player = OvenPlayer.create("player", {
        autoStart : true,
        sources: webrtcSources
      });
      player.on("error", function(error){
        console.log(error);
      });
      player.on("ready", function(data) {
        player.play();
      });
    </script>
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" crossorigin="anonymous"></script>
  </body>
</html>
